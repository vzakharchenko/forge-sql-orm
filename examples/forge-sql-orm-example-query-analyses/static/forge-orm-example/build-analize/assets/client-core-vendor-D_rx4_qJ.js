var ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function kn(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var y=e.default;if(typeof y=="function"){var c=function f(){return this instanceof f?Reflect.construct(y,arguments,this.constructor):y.apply(this,arguments)};c.prototype=y.prototype}else c={};return Object.defineProperty(c,"__esModule",{value:!0}),Object.keys(e).forEach(function(f){var v=Object.getOwnPropertyDescriptor(e,f);Object.defineProperty(c,f,v.get?v:{enumerable:!0,get:function(){return e[f]}})}),c}var X={},Ue={},Le={},st;function N(){return st||(st=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Log=e.LogLevel=void 0;const y=" DEBUG ",c="  INFO ",f="  WARN ",v=" ERROR ";function _(E){return E.unshift("[Statsig]"),E}e.LogLevel={None:0,Error:1,Warn:2,Info:3,Debug:4};class b{static info(...h){b.level>=e.LogLevel.Info&&console.info(c,..._(h))}static debug(...h){b.level>=e.LogLevel.Debug&&console.debug(y,..._(h))}static warn(...h){b.level>=e.LogLevel.Warn&&console.warn(f,..._(h))}static error(...h){b.level>=e.LogLevel.Error&&console.error(v,..._(h))}}e.Log=b,b.level=e.LogLevel.Warn}(Le)),Le}var at;function H(){return at||(at=1,function(e){var y,c,f;Object.defineProperty(e,"__esModule",{value:!0}),e._getInstance=e._getStatsigGlobalFlag=e._getStatsigGlobal=void 0;const v=N(),_=()=>{try{return typeof __STATSIG__<"u"?__STATSIG__:i}catch{return i}};e._getStatsigGlobal=_;const b=o=>(0,e._getStatsigGlobal)()[o];e._getStatsigGlobalFlag=b;const E=o=>{const n=(0,e._getStatsigGlobal)();return o?n.instances&&n.instances[o]:(n.instances&&Object.keys(n.instances).length>1&&v.Log.warn("Call made to Statsig global instance without an SDK key but there is more than one client instance. If you are using mulitple clients, please specify the SDK key."),n.firstInstance)};e._getInstance=E;const h="__STATSIG__",a=typeof window<"u"?window:{},l=typeof ot<"u"?ot:{},r=typeof globalThis<"u"?globalThis:{},i=(f=(c=(y=a[h])!==null&&y!==void 0?y:l[h])!==null&&c!==void 0?c:r[h])!==null&&f!==void 0?f:{instance:e._getInstance};a[h]=i,l[h]=i,r[h]=i}(Ue)),Ue}var Pe={},lt;function Xe(){return lt||(lt=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Diagnostics=void 0;const y=new Map,c="start",f="end",v="statsig::diagnostics";e.Diagnostics={_getMarkers:a=>y.get(a),_markInitOverallStart:a=>{E(a,_({},c,"overall"))},_markInitOverallEnd:(a,l,r)=>{E(a,_({success:l,error:l?void 0:{name:"InitializeError",message:"Failed to initialize"},evaluationDetails:r},f,"overall"))},_markInitNetworkReqStart:(a,l)=>{E(a,_(l,c,"initialize","network_request"))},_markInitNetworkReqEnd:(a,l)=>{E(a,_(l,f,"initialize","network_request"))},_markInitProcessStart:a=>{E(a,_({},c,"initialize","process"))},_markInitProcessEnd:(a,l)=>{E(a,_(l,f,"initialize","process"))},_clearMarkers:a=>{y.delete(a)},_formatError(a){if(a&&typeof a=="object")return{code:h(a,"code"),name:h(a,"name"),message:h(a,"message")}},_getDiagnosticsData(a,l,r,i){var o;return{success:(a==null?void 0:a.ok)===!0,statusCode:a==null?void 0:a.status,sdkRegion:(o=a==null?void 0:a.headers)===null||o===void 0?void 0:o.get("x-statsig-region"),isDelta:r.includes('"is_delta":true')===!0?!0:void 0,attempt:l,error:e.Diagnostics._formatError(i)}},_enqueueDiagnosticsEvent(a,l,r,i){const o=e.Diagnostics._getMarkers(r);if(o==null||o.length<=0)return-1;const n=o[o.length-1].timestamp-o[0].timestamp;e.Diagnostics._clearMarkers(r);const t=b(a,{context:"initialize",markers:o.slice(),statsigOptions:i});return l.enqueue(t),n}};function _(a,l,r,i){return Object.assign({key:r,action:l,step:i,timestamp:Date.now()},a)}function b(a,l){return{eventName:v,user:a,value:null,metadata:l,time:Date.now()}}function E(a,l){var r;const i=(r=y.get(a))!==null&&r!==void 0?r:[];i.push(l),y.set(a,i)}function h(a,l){if(l in a)return a[l]}}(Pe)),Pe}var Y={},Z={},je={},ee={},ut;function Ye(){if(ut)return ee;ut=1,Object.defineProperty(ee,"__esModule",{value:!0}),ee._isTypeMatch=ee._typeOf=void 0;function e(c){return Array.isArray(c)?"array":typeof c}ee._typeOf=e;function y(c,f){const v=_=>Array.isArray(_)?"array":typeof _;return v(c)===v(f)}return ee._isTypeMatch=y,ee}var ct;function ge(){return ct||(ct=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._getSortedObject=e._DJB2Object=e._DJB2=void 0;const y=Ye(),c=_=>{let b=0;for(let E=0;E<_.length;E++){const h=_.charCodeAt(E);b=(b<<5)-b+h,b=b&b}return String(b>>>0)};e._DJB2=c;const f=(_,b)=>(0,e._DJB2)(JSON.stringify((0,e._getSortedObject)(_,b)));e._DJB2Object=f;const v=(_,b)=>{if(_==null)return null;const E=Object.keys(_).sort(),h={};return E.forEach(a=>{const l=_[a];if(b===0||(0,y._typeOf)(l)!=="object"){h[a]=l;return}h[a]=(0,e._getSortedObject)(l,b!=null?b-1:b)}),h};e._getSortedObject=v}(je)),je}var dt;function Ie(){if(dt)return Z;dt=1,Object.defineProperty(Z,"__esModule",{value:!0}),Z._getStorageKey=Z._getUserStorageKey=void 0;const e=ge();function y(f,v,_){var b;if(_)return _(f,v);const E=v&&v.customIDs?v.customIDs:{},h=[`uid:${(b=v==null?void 0:v.userID)!==null&&b!==void 0?b:""}`,`cids:${Object.keys(E).sort((a,l)=>a.localeCompare(l)).map(a=>`${a}-${E[a]}`).join(",")}`,`k:${f}`];return(0,e._DJB2)(h.join("|"))}Z._getUserStorageKey=y;function c(f,v,_){return v?y(f,v,_):(0,e._DJB2)(`k:${f}`)}return Z._getStorageKey=c,Z}var Ne={},_t;function Ce(){return _t||(_t=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NetworkParam=e.NetworkDefault=e.Endpoint=void 0,e.Endpoint={_initialize:"initialize",_rgstr:"rgstr",_download_config_specs:"download_config_specs"},e.NetworkDefault={[e.Endpoint._rgstr]:"https://prodregistryv2.org/v1",[e.Endpoint._initialize]:"https://featureassets.org/v1",[e.Endpoint._download_config_specs]:"https://api.statsigcdn.com/v1"},e.NetworkParam={EventCount:"ec",SdkKey:"k",SdkType:"st",SdkVersion:"sv",Time:"t",SessionID:"sid",StatsigEncoded:"se",IsGzipped:"gz"}}(Ne)),Ne}var Ae={},gt;function le(){return gt||(gt=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._getUnloadEvent=e._getCurrentPageUrlSafe=e._addDocumentEventListenerSafe=e._addWindowEventListenerSafe=e._isServerEnv=e._getDocumentSafe=e._getWindowSafe=void 0;const y=()=>typeof window<"u"?window:null;e._getWindowSafe=y;const c=()=>{var h;const a=(0,e._getWindowSafe)();return(h=a==null?void 0:a.document)!==null&&h!==void 0?h:null};e._getDocumentSafe=c;const f=()=>{if((0,e._getDocumentSafe)()!==null)return!1;const h=typeof process<"u"&&process.versions!=null&&process.versions.node!=null;return typeof EdgeRuntime=="string"||h};e._isServerEnv=f;const v=(h,a)=>{const l=(0,e._getWindowSafe)();typeof(l==null?void 0:l.addEventListener)=="function"&&l.addEventListener(h,a)};e._addWindowEventListenerSafe=v;const _=(h,a)=>{const l=(0,e._getDocumentSafe)();typeof(l==null?void 0:l.addEventListener)=="function"&&l.addEventListener(h,a)};e._addDocumentEventListenerSafe=_;const b=()=>{var h;try{return(h=(0,e._getWindowSafe)())===null||h===void 0?void 0:h.location.href.split(/[?#]/)[0]}catch{return}};e._getCurrentPageUrlSafe=b;const E=()=>{const h=(0,e._getWindowSafe)();return h&&"onpagehide"in h?"pagehide":"beforeunload"};e._getUnloadEvent=E}(Ae)),Ae}var q={},ft;function Ht(){if(ft)return q;ft=1,Object.defineProperty(q,"__esModule",{value:!0}),q._createLayerParameterExposure=q._createConfigExposure=q._mapExposures=q._createGateExposure=q._isExposureEvent=void 0;const e="statsig::config_exposure",y="statsig::gate_exposure",c="statsig::layer_exposure",f=(l,r,i,o,n)=>(i.bootstrapMetadata&&(o.bootstrapMetadata=i.bootstrapMetadata),{eventName:l,user:r,value:null,metadata:a(i,o),secondaryExposures:n,time:Date.now()}),v=({eventName:l})=>l===y||l===e||l===c;q._isExposureEvent=v;const _=(l,r,i)=>{var o,n,t;const u={gate:r.name,gateValue:String(r.value),ruleID:r.ruleID};return((o=r.__evaluation)===null||o===void 0?void 0:o.version)!=null&&(u.configVersion=r.__evaluation.version),f(y,l,r.details,u,b((t=(n=r.__evaluation)===null||n===void 0?void 0:n.secondary_exposures)!==null&&t!==void 0?t:[],i))};q._createGateExposure=_;function b(l,r){return l.map(i=>typeof i=="string"?(r??{})[i]:i).filter(i=>i!=null)}q._mapExposures=b;const E=(l,r,i)=>{var o,n,t,u;const g={config:r.name,ruleID:r.ruleID};return((o=r.__evaluation)===null||o===void 0?void 0:o.version)!=null&&(g.configVersion=r.__evaluation.version),((n=r.__evaluation)===null||n===void 0?void 0:n.passed)!=null&&(g.rulePassed=String(r.__evaluation.passed)),f(e,l,r.details,g,b((u=(t=r.__evaluation)===null||t===void 0?void 0:t.secondary_exposures)!==null&&u!==void 0?u:[],i))};q._createConfigExposure=E;const h=(l,r,i,o)=>{var n,t,u,g,s,p;const w=r.__evaluation,d=((n=w==null?void 0:w.explicit_parameters)===null||n===void 0?void 0:n.includes(i))===!0;let m="",D=(t=w==null?void 0:w.undelegated_secondary_exposures)!==null&&t!==void 0?t:[];d&&(m=(u=w.allocated_experiment_name)!==null&&u!==void 0?u:"",D=w.secondary_exposures);const k=(g=r.__evaluation)===null||g===void 0?void 0:g.parameter_rule_ids,C={config:r.name,parameterName:i,ruleID:(s=k==null?void 0:k[i])!==null&&s!==void 0?s:r.ruleID,allocatedExperiment:m,isExplicitParameter:String(d)};return((p=r.__evaluation)===null||p===void 0?void 0:p.version)!=null&&(C.configVersion=r.__evaluation.version),f(c,l,r.details,C,b(D,o))};q._createLayerParameterExposure=h;const a=(l,r)=>(r.reason=l.reason,l.lcut&&(r.lcut=String(l.lcut)),l.receivedAt&&(r.receivedAt=String(l.receivedAt)),r);return q}var te={},vt;function Te(){return vt||(vt=1,Object.defineProperty(te,"__esModule",{value:!0}),te.LoggingEnabledOption=te.LogEventCompressionMode=void 0,te.LogEventCompressionMode={Disabled:"d",Enabled:"e",Forced:"f"},te.LoggingEnabledOption={disabled:"disabled",browserOnly:"browser-only",always:"always"}),te}var Fe={},ht;function Q(){return ht||(ht=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._setObjectInStorage=e._getObjectFromStorage=e.Storage=void 0;const y=N(),c=le(),f={},v={isReady:()=>!0,isReadyResolver:()=>null,getProviderName:()=>"InMemory",getItem:r=>f[r]?f[r]:null,setItem:(r,i)=>{f[r]=i},removeItem:r=>{delete f[r]},getAllKeys:()=>Object.keys(f)};let _=null;try{const r=(0,c._getWindowSafe)();r&&r.localStorage&&typeof r.localStorage.getItem=="function"&&(_={isReady:()=>!0,isReadyResolver:()=>null,getProviderName:()=>"LocalStorage",getItem:i=>r.localStorage.getItem(i),setItem:(i,o)=>r.localStorage.setItem(i,o),removeItem:i=>r.localStorage.removeItem(i),getAllKeys:()=>Object.keys(r.localStorage)})}catch{y.Log.warn("Failed to setup localStorageProvider.")}let b=_??v,E=b;function h(r){try{return r()}catch(i){if(i instanceof Error&&i.name==="SecurityError")return e.Storage._setProvider(v),null;if(i instanceof Error&&i.name==="QuotaExceededError"){const n=e.Storage.getAllKeys().filter(t=>t.startsWith("statsig."));i.message=`${i.message}. Statsig Keys: ${n.length}`}throw i}}e.Storage={isReady:()=>E.isReady(),isReadyResolver:()=>E.isReadyResolver(),getProviderName:()=>E.getProviderName(),getItem:r=>h(()=>E.getItem(r)),setItem:(r,i)=>h(()=>E.setItem(r,i)),removeItem:r=>E.removeItem(r),getAllKeys:()=>E.getAllKeys(),_setProvider:r=>{b=r,E=r},_setDisabled:r=>{r?E=v:E=b}};function a(r){const i=e.Storage.getItem(r);return JSON.parse(i??"null")}e._getObjectFromStorage=a;function l(r,i){e.Storage.setItem(r,JSON.stringify(i))}e._setObjectInStorage=l}(Fe)),Fe}var he={},yt;function Qt(){if(yt)return he;yt=1,Object.defineProperty(he,"__esModule",{value:!0}),he.UrlConfiguration=void 0;const e=ge(),y=Ce(),c={[y.Endpoint._initialize]:"i",[y.Endpoint._rgstr]:"e",[y.Endpoint._download_config_specs]:"d"};let f=class{constructor(_,b,E,h){this.customUrl=null,this.fallbackUrls=null,this.endpoint=_,this.endpointDnsKey=c[_],b&&(this.customUrl=b),!b&&E&&(this.customUrl=E.endsWith("/")?`${E}${_}`:`${E}/${_}`),h&&(this.fallbackUrls=h);const a=y.NetworkDefault[_];this.defaultUrl=`${a}/${_}`}getUrl(){var _;return(_=this.customUrl)!==null&&_!==void 0?_:this.defaultUrl}getChecksum(){var _;const b=((_=this.fallbackUrls)!==null&&_!==void 0?_:[]).sort().join(",");return(0,e._DJB2)(this.customUrl+b)}};return he.UrlConfiguration=f,he}var qe={},mt;function Ze(){return mt||(mt=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._notifyVisibilityChanged=e._subscribeToVisiblityChanged=e._isUnloading=e._isCurrentlyVisible=void 0;const y=le(),c="foreground",f="background",v=[];let _=c,b=!1;const E=()=>_===c;e._isCurrentlyVisible=E;const h=()=>b;e._isUnloading=h;const a=r=>{v.unshift(r)};e._subscribeToVisiblityChanged=a;const l=r=>{r!==_&&(_=r,v.forEach(i=>i(r)))};e._notifyVisibilityChanged=l,(0,y._addWindowEventListenerSafe)("focus",()=>{b=!1,(0,e._notifyVisibilityChanged)(c)}),(0,y._addWindowEventListenerSafe)("blur",()=>(0,e._notifyVisibilityChanged)(f)),(0,y._addDocumentEventListenerSafe)("visibilitychange",()=>{(0,e._notifyVisibilityChanged)(document.visibilityState==="visible"?c:f)}),(0,y._addWindowEventListenerSafe)((0,y._getUnloadEvent)(),()=>{b=!0,(0,e._notifyVisibilityChanged)(f)})}(qe)),qe}var St;function Xt(){if(St)return Y;St=1;var e=Y&&Y.__awaiter||function(w,d,m,D){function k(C){return C instanceof m?C:new m(function(L){L(C)})}return new(m||(m=Promise))(function(C,L){function U(B){try{x(D.next(B))}catch(I){L(I)}}function W(B){try{x(D.throw(B))}catch(I){L(I)}}function x(B){B.done?C(B.value):k(B.value).then(U,W)}x((D=D.apply(w,d||[])).next())})};Object.defineProperty(Y,"__esModule",{value:!0}),Y.EventLogger=void 0;const y=Ie(),c=ge(),f=N(),v=Ce(),_=le(),b=Ht(),E=Te(),h=Q(),a=Qt(),l=Ze(),r=100,i=1e4,o=1e3,n=6e5,t=500,u=200,g={},s={Startup:"startup",GainedFocus:"gained_focus"};let p=class _e{static _safeFlushAndForget(d){var m;(m=g[d])===null||m===void 0||m.flush().catch(()=>{})}static _safeRetryFailedLogs(d){var m;(m=g[d])===null||m===void 0||m._retryFailedLogs(s.GainedFocus)}constructor(d,m,D,k){var C,L;this._sdkKey=d,this._emitter=m,this._network=D,this._options=k,this._queue=[],this._lastExposureTimeMap={},this._nonExposedChecks={},this._hasRunQuickFlush=!1,this._creationTime=Date.now(),this._loggingEnabled=(C=k==null?void 0:k.loggingEnabled)!==null&&C!==void 0?C:(k==null?void 0:k.disableLogging)===!0?E.LoggingEnabledOption.disabled:E.LoggingEnabledOption.browserOnly,k!=null&&k.loggingEnabled&&k.disableLogging!==void 0&&f.Log.warn("Detected both loggingEnabled and disableLogging options. loggingEnabled takes precedence - please remove disableLogging."),this._maxQueueSize=(L=k==null?void 0:k.loggingBufferMaxSize)!==null&&L!==void 0?L:r;const U=k==null?void 0:k.networkConfig;this._logEventUrlConfig=new a.UrlConfiguration(v.Endpoint._rgstr,U==null?void 0:U.logEventUrl,U==null?void 0:U.api,U==null?void 0:U.logEventFallbackUrls)}setLogEventCompressionMode(d){this._network.setLogEventCompressionMode(d)}setLoggingEnabled(d){this._loggingEnabled=d}enqueue(d){this._shouldLogEvent(d)&&(this._normalizeAndAppendEvent(d),this._quickFlushIfNeeded(),this._queue.length>this._maxQueueSize&&_e._safeFlushAndForget(this._sdkKey))}incrementNonExposureCount(d){var m;const D=(m=this._nonExposedChecks[d])!==null&&m!==void 0?m:0;this._nonExposedChecks[d]=D+1}reset(){this._lastExposureTimeMap={}}start(){var d;const m=(0,_._isServerEnv)();m&&((d=this._options)===null||d===void 0?void 0:d.loggingEnabled)!=="always"||(g[this._sdkKey]=this,m||(0,l._subscribeToVisiblityChanged)(D=>{D==="background"?_e._safeFlushAndForget(this._sdkKey):D==="foreground"&&_e._safeRetryFailedLogs(this._sdkKey)}),this._retryFailedLogs(s.Startup),this._startBackgroundFlushInterval())}stop(){return e(this,void 0,void 0,function*(){this._flushIntervalId&&(clearInterval(this._flushIntervalId),this._flushIntervalId=null),delete g[this._sdkKey],yield this.flush()})}flush(){return e(this,void 0,void 0,function*(){if(this._appendAndResetNonExposedChecks(),this._queue.length===0)return;const d=this._queue;this._queue=[],yield this._sendEvents(d)})}_quickFlushIfNeeded(){this._hasRunQuickFlush||(this._hasRunQuickFlush=!0,!(Date.now()-this._creationTime>u)&&setTimeout(()=>_e._safeFlushAndForget(this._sdkKey),u))}_shouldLogEvent(d){var m;if(((m=this._options)===null||m===void 0?void 0:m.loggingEnabled)!=="always"&&(0,_._isServerEnv)())return!1;if(!(0,b._isExposureEvent)(d))return!0;const D=d.user?d.user:{statsigEnvironment:void 0},k=(0,y._getUserStorageKey)(this._sdkKey,D),C=d.metadata?d.metadata:{},L=[d.eventName,k,C.gate,C.config,C.ruleID,C.allocatedExperiment,C.parameterName,String(C.isExplicitParameter),C.reason].join("|"),U=this._lastExposureTimeMap[L],W=Date.now();return U&&W-U<n?!1:(Object.keys(this._lastExposureTimeMap).length>o&&(this._lastExposureTimeMap={}),this._lastExposureTimeMap[L]=W,!0)}_sendEvents(d){var m,D;return e(this,void 0,void 0,function*(){if(this._loggingEnabled==="disabled")return this._saveFailedLogsToStorage(d),!1;try{const C=(0,l._isUnloading)()&&this._network.isBeaconSupported()&&((D=(m=this._options)===null||m===void 0?void 0:m.networkConfig)===null||D===void 0?void 0:D.networkOverrideFunc)==null;return this._emitter({name:"pre_logs_flushed",events:d}),(C?yield this._sendEventsViaBeacon(d):yield this._sendEventsViaPost(d)).success?(this._emitter({name:"logs_flushed",events:d}),!0):(f.Log.warn("Failed to flush events."),this._saveFailedLogsToStorage(d),!1)}catch{return f.Log.warn("Failed to flush events."),!1}})}_sendEventsViaPost(d){var m;return e(this,void 0,void 0,function*(){const D=yield this._network.post(this._getRequestData(d)),k=(m=D==null?void 0:D.code)!==null&&m!==void 0?m:-1;return{success:k>=200&&k<300}})}_sendEventsViaBeacon(d){return e(this,void 0,void 0,function*(){return{success:yield this._network.beacon(this._getRequestData(d))}})}_getRequestData(d){return{sdkKey:this._sdkKey,data:{events:d},urlConfig:this._logEventUrlConfig,retries:3,isCompressable:!0,params:{[v.NetworkParam.EventCount]:String(d.length)},credentials:"same-origin"}}_saveFailedLogsToStorage(d){for(;d.length>t;)d.shift();const m=this._getStorageKey();try{(0,h._setObjectInStorage)(m,d)}catch{f.Log.warn("Unable to save failed logs to storage")}}_retryFailedLogs(d){const m=this._getStorageKey();e(this,void 0,void 0,function*(){h.Storage.isReady()||(yield h.Storage.isReadyResolver());const D=(0,h._getObjectFromStorage)(m);if(!D)return;d===s.Startup&&h.Storage.removeItem(m),(yield this._sendEvents(D))&&d===s.GainedFocus&&h.Storage.removeItem(m)}).catch(()=>{f.Log.warn("Failed to flush stored logs")})}_getStorageKey(){return`statsig.failed_logs.${(0,c._DJB2)(this._sdkKey)}`}_normalizeAndAppendEvent(d){d.user&&(d.user=Object.assign({},d.user),delete d.user.privateAttributes);const m={},D=this._getCurrentPageUrl();D&&(m.statsigMetadata={currentPage:D});const k=Object.assign(Object.assign({},d),m);f.Log.debug("Enqueued Event:",k),this._queue.push(k)}_appendAndResetNonExposedChecks(){Object.keys(this._nonExposedChecks).length!==0&&(this._normalizeAndAppendEvent({eventName:"statsig::non_exposed_checks",user:null,time:Date.now(),metadata:{checks:Object.assign({},this._nonExposedChecks)}}),this._nonExposedChecks={})}_getCurrentPageUrl(){var d;if(((d=this._options)===null||d===void 0?void 0:d.includeCurrentPageUrlWithEvents)!==!1)return(0,_._getCurrentPageUrlSafe)()}_startBackgroundFlushInterval(){var d,m;const D=(m=(d=this._options)===null||d===void 0?void 0:d.loggingIntervalMs)!==null&&m!==void 0?m:i,k=setInterval(()=>{const C=g[this._sdkKey];!C||C._flushIntervalId!==k?clearInterval(k):_e._safeFlushAndForget(this._sdkKey)},D);this._flushIntervalId=k}};return Y.EventLogger=p,Y}var Ke={},bt;function Oe(){return bt||(bt=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StatsigMetadataProvider=e.SDK_VERSION=void 0,e.SDK_VERSION="3.17.1";let y={sdkVersion:e.SDK_VERSION,sdkType:"js-mono"};e.StatsigMetadataProvider={get:()=>y,add:c=>{y=Object.assign(Object.assign({},y),c)}}}(Ke)),Ke}var Be={},pt;function sn(){return pt||(pt=1,Object.defineProperty(Be,"__esModule",{value:!0})),Be}var J={},ye={},me={},Et;function et(){if(Et)return me;Et=1,Object.defineProperty(me,"__esModule",{value:!0}),me.getUUID=void 0;function e(){if(typeof crypto<"u"&&typeof crypto.randomUUID=="function")return crypto.randomUUID();let y=new Date().getTime(),c=typeof performance<"u"&&performance.now&&performance.now()*1e3||0;return`xxxxxxxx-xxxx-4xxx-${"89ab"[Math.floor(Math.random()*4)]}xxx-xxxxxxxxxxxx`.replace(/[xy]/g,v=>{let _=Math.random()*16;return y>0?(_=(y+_)%16|0,y=Math.floor(y/16)):(_=(c+_)%16|0,c=Math.floor(c/16)),(v==="x"?_:_&7|8).toString(16)})}return me.getUUID=e,me}var wt;function Re(){if(wt)return ye;wt=1,Object.defineProperty(ye,"__esModule",{value:!0}),ye.StableID=void 0;const e=Ie(),y=N(),c=le(),f=Q(),v=et(),_={},b={},E={};ye.StableID={cookiesEnabled:!1,randomID:Math.random().toString(36),get:n=>{if(E[n])return null;if(_[n]!=null)return _[n];let t=null;return t=r(n),t!=null?(_[n]=t,a(t,n),t):(t=l(n),t==null&&(t=(0,v.getUUID)()),a(t,n),i(t,n),_[n]=t,t)},setOverride:(n,t)=>{_[t]=n,a(n,t),i(n,t)},_setCookiesEnabled:(n,t)=>{b[n]=t},_setDisabled:(n,t)=>{E[n]=t}};function h(n){return`statsig.stable_id.${(0,e._getStorageKey)(n)}`}function a(n,t){const u=h(t);try{(0,f._setObjectInStorage)(u,n)}catch{y.Log.warn("Failed to save StableID to storage")}}function l(n){const t=h(n);return(0,f._getObjectFromStorage)(t)}function r(n){if(!b[n]||(0,c._getDocumentSafe)()==null)return null;const t=document.cookie.split(";");for(const u of t){const[g,s]=u.trim().split("=");if(g===o(n))return decodeURIComponent(s)}return null}function i(n,t){if(!b[t]||!document)return;const u=new Date;u.setFullYear(u.getFullYear()+1),document.cookie=`${o(t)}=${encodeURIComponent(n)}; expires=${u.toUTCString()}; path=/`}function o(n){return`statsig.stable_id.${(0,e._getStorageKey)(n)}`}return ye}var ne={},Dt;function Yt(){if(Dt)return ne;Dt=1,Object.defineProperty(ne,"__esModule",{value:!0}),ne._getFullUserHash=ne._normalizeUser=void 0;const e=ge(),y=N();function c(v,_,b){try{const E=JSON.parse(JSON.stringify(v));return _!=null&&_.environment!=null?E.statsigEnvironment=_.environment:b!=null&&(E.statsigEnvironment={tier:b}),E}catch{return y.Log.error("Failed to JSON.stringify user"),{statsigEnvironment:void 0}}}ne._normalizeUser=c;function f(v){return v?(0,e._DJB2Object)(v):null}return ne._getFullUserHash=f,ne}var Se={},kt;function Zt(){if(kt)return Se;kt=1,Object.defineProperty(Se,"__esModule",{value:!0}),Se._typedJsonParse=void 0;const e=N();function y(c,f,v){try{const _=JSON.parse(c);if(_&&typeof _=="object"&&f in _)return _}catch{}return e.Log.error(`Failed to parse ${v}`),null}return Se._typedJsonParse=y,Se}var Ot;function an(){if(Ot)return J;Ot=1;var e=J&&J.__awaiter||function(r,i,o,n){function t(u){return u instanceof o?u:new o(function(g){g(u)})}return new(o||(o=Promise))(function(u,g){function s(d){try{w(n.next(d))}catch(m){g(m)}}function p(d){try{w(n.throw(d))}catch(m){g(m)}}function w(d){d.done?u(d.value):t(d.value).then(s,p)}w((n=n.apply(r,i||[])).next())})};Object.defineProperty(J,"__esModule",{value:!0}),J._makeDataAdapterResult=J.DataAdapterCore=void 0;const y=N(),c=Re(),f=Yt(),v=Q(),_=Zt(),b=10;let E=class{constructor(i,o){this._adapterName=i,this._cacheSuffix=o,this._options=null,this._sdkKey=null,this._lastModifiedStoreKey=`statsig.last_modified_time.${o}`,this._inMemoryCache=new a}attach(i,o,n){this._sdkKey=i,this._options=o}getDataSync(i){const o=i&&(0,f._normalizeUser)(i,this._options),n=this._getCacheKey(o),t=this._inMemoryCache.get(n,o);if(t)return t;const u=this._loadFromCache(n);return u?(this._inMemoryCache.add(n,u),this._inMemoryCache.get(n,o)):null}setData(i,o){const n=o&&(0,f._normalizeUser)(o,this._options),t=this._getCacheKey(n);this._inMemoryCache.add(t,h("Bootstrap",i,null,n))}_getDataAsyncImpl(i,o,n){return e(this,void 0,void 0,function*(){v.Storage.isReady()||(yield v.Storage.isReadyResolver());const t=i??this.getDataSync(o),u=[this._fetchAndPrepFromNetwork(t,o,n)];return n!=null&&n.timeoutMs&&u.push(new Promise(g=>setTimeout(g,n.timeoutMs)).then(()=>(y.Log.debug("Fetching latest value timed out"),null))),yield Promise.race(u)})}_prefetchDataImpl(i,o){return e(this,void 0,void 0,function*(){const n=i&&(0,f._normalizeUser)(i,this._options),t=this._getCacheKey(n),u=yield this._getDataAsyncImpl(null,n,o);u&&this._inMemoryCache.add(t,Object.assign(Object.assign({},u),{source:"Prefetch"}))})}_fetchAndPrepFromNetwork(i,o,n){var t;return e(this,void 0,void 0,function*(){const u=(t=i==null?void 0:i.data)!==null&&t!==void 0?t:null,g=i!=null&&this._isCachedResultValidFor204(i,o),s=yield this._fetchFromNetwork(u,o,n,g);if(!s)return y.Log.debug("No response returned for latest value"),null;const p=(0,_._typedJsonParse)(s,"has_updates","Response"),w=this._getSdkKey(),d=c.StableID.get(w);let m=null;if((p==null?void 0:p.has_updates)===!0)m=h("Network",s,d,o);else if(u&&(p==null?void 0:p.has_updates)===!1)m=h("NetworkNotModified",u,d,o);else return null;const D=this._getCacheKey(o);return this._inMemoryCache.add(D,m),this._writeToCache(D,m),m})}_getSdkKey(){return this._sdkKey!=null?this._sdkKey:(y.Log.error(`${this._adapterName} is not attached to a Client`),"")}_loadFromCache(i){var o;const n=(o=v.Storage.getItem)===null||o===void 0?void 0:o.call(v.Storage,i);if(n==null)return null;const t=(0,_._typedJsonParse)(n,"source","Cached Result");return t?Object.assign(Object.assign({},t),{source:"Cache"}):null}_writeToCache(i,o){v.Storage.setItem(i,JSON.stringify(o)),this._runLocalStorageCacheEviction(i)}_runLocalStorageCacheEviction(i){var o;const n=(o=(0,v._getObjectFromStorage)(this._lastModifiedStoreKey))!==null&&o!==void 0?o:{};n[i]=Date.now();const t=l(n,b);t&&(delete n[t],v.Storage.removeItem(t)),(0,v._setObjectInStorage)(this._lastModifiedStoreKey,n)}};J.DataAdapterCore=E;function h(r,i,o,n){return{source:r,data:i,receivedAt:Date.now(),stableID:o,fullUserHash:(0,f._getFullUserHash)(n)}}J._makeDataAdapterResult=h;class a{constructor(){this._data={}}get(i,o){var n;const t=this._data[i],u=t==null?void 0:t.stableID,g=(n=o==null?void 0:o.customIDs)===null||n===void 0?void 0:n.stableID;return g&&u&&g!==u?(y.Log.warn("'StatsigUser.customIDs.stableID' mismatch"),null):t}add(i,o){const n=l(this._data,b-1);n&&delete this._data[n],this._data[i]=o}merge(i){this._data=Object.assign(Object.assign({},this._data),i)}}function l(r,i){const o=Object.keys(r);return o.length<=i?null:o.reduce((n,t)=>{const u=r[n],g=r[t];return typeof u=="object"&&typeof g=="object"?g.receivedAt<u.receivedAt?t:n:g<u?t:n})}return J}var $e={},It;function ln(){return It||(It=1,Object.defineProperty($e,"__esModule",{value:!0})),$e}var be={},pe={},Ct;function tt(){if(Ct)return pe;Ct=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.SDKType=void 0;const e={};let y;return pe.SDKType={_get:c=>{var f;return((f=e[c])!==null&&f!==void 0?f:"js-mono")+(y??"")},_setClientType(c,f){e[c]=f},_setBindingType(c){(!y||y==="-react")&&(y="-"+c)}},pe}var Tt;function en(){return Tt||(Tt=1,function(e){var y=be&&be.__awaiter||function(r,i,o,n){function t(u){return u instanceof o?u:new o(function(g){g(u)})}return new(o||(o=Promise))(function(u,g){function s(d){try{w(n.next(d))}catch(m){g(m)}}function p(d){try{w(n.throw(d))}catch(m){g(m)}}function w(d){d.done?u(d.value):t(d.value).then(s,p)}w((n=n.apply(r,i||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorBoundary=e.EXCEPTION_ENDPOINT=void 0;const c=N(),f=tt(),v=Oe();e.EXCEPTION_ENDPOINT="https://statsigapi.net/v1/sdk_exception";const _="[Statsig] UnknownError";let b=class{constructor(i,o,n,t){this._sdkKey=i,this._options=o,this._emitter=n,this._lastSeenError=t,this._seen=new Set}wrap(i){try{const o=i;a(o).forEach(n=>{const t=o[n];"$EB"in t||(o[n]=(...u)=>this._capture(n,()=>t.apply(i,u)),o[n].$EB=!0)})}catch(o){this._onError("eb:wrap",o)}}logError(i,o){this._onError(i,o)}getLastSeenErrorAndReset(){const i=this._lastSeenError;return this._lastSeenError=void 0,i??null}attachErrorIfNoneExists(i){this._lastSeenError||(this._lastSeenError=E(i))}_capture(i,o){try{const n=o();return n&&n instanceof Promise?n.catch(t=>this._onError(i,t)):n}catch(n){return this._onError(i,n),null}}_onError(i,o){try{c.Log.warn(`Caught error in ${i}`,{error:o}),y(this,void 0,void 0,function*(){var t,u,g,s,p,w,d;const m=o||Error(_),D=m instanceof Error,k=D?m.name:"No Name",C=E(m);if(this._lastSeenError=C,this._seen.has(k))return;if(this._seen.add(k),!((u=(t=this._options)===null||t===void 0?void 0:t.networkConfig)===null||u===void 0)&&u.preventAllNetworkTraffic){(g=this._emitter)===null||g===void 0||g.call(this,{name:"error",error:o,tag:i});return}const L=f.SDKType._get(this._sdkKey),U=v.StatsigMetadataProvider.get(),W=D?m.stack:h(m),x=Object.assign({tag:i,exception:k,info:W,statsigOptions:l(this._options)},Object.assign(Object.assign({},U),{sdkType:L}));yield((w=(p=(s=this._options)===null||s===void 0?void 0:s.networkConfig)===null||p===void 0?void 0:p.networkOverrideFunc)!==null&&w!==void 0?w:fetch)(e.EXCEPTION_ENDPOINT,{method:"POST",headers:{"STATSIG-API-KEY":this._sdkKey,"STATSIG-SDK-TYPE":String(L),"STATSIG-SDK-VERSION":String(U.sdkVersion),"Content-Type":"application/json"},body:JSON.stringify(x)}),(d=this._emitter)===null||d===void 0||d.call(this,{name:"error",error:o,tag:i})}).then(()=>{}).catch(()=>{})}catch{}}};e.ErrorBoundary=b;function E(r){return r instanceof Error?r:typeof r=="string"?new Error(r):new Error("An unknown error occurred.")}function h(r){try{return JSON.stringify(r)}catch{return _}}function a(r){const i=new Set;let o=Object.getPrototypeOf(r);for(;o&&o!==Object.prototype;)Object.getOwnPropertyNames(o).filter(n=>typeof(o==null?void 0:o[n])=="function").forEach(n=>i.add(n)),o=Object.getPrototypeOf(o);return Array.from(i)}function l(r){if(!r)return{};const i={};return Object.entries(r).forEach(([o,n])=>{switch(typeof n){case"number":case"bigint":case"boolean":i[String(o)]=n;break;case"string":n.length<50?i[String(o)]=n:i[String(o)]="set";break;case"object":o==="environment"?i.environment=n:o==="networkConfig"?i.networkConfig=n:i[String(o)]=n!=null?"set":"unset";break}}),i}}(be)),be}var Ge={},Rt;function un(){return Rt||(Rt=1,Object.defineProperty(Ge,"__esModule",{value:!0})),Ge}var Ve={},Mt;function cn(){return Mt||(Mt=1,Object.defineProperty(Ve,"__esModule",{value:!0})),Ve}var Je={},Ut;function dn(){return Ut||(Ut=1,Object.defineProperty(Je,"__esModule",{value:!0})),Je}var re={},Lt;function tn(){if(Lt)return re;Lt=1,Object.defineProperty(re,"__esModule",{value:!0}),re.createMemoKey=re.MemoPrefix=void 0,re.MemoPrefix={_gate:"g",_dynamicConfig:"c",_experiment:"e",_layer:"l",_paramStore:"p"};const e=new Set([]),y=new Set(["userPersistedValues"]);function c(f,v,_){let b=`${f}|${v}`;if(!_)return b;for(const E of Object.keys(_)){if(y.has(E))return;e.has(E)?b+=`|${E}=true`:b+=`|${E}=${_[E]}`}return b}return re.createMemoKey=c,re}var ie={},z={},oe={},Pt;function _n(){if(Pt)return oe;Pt=1;var e=oe&&oe.__awaiter||function(E,h,a,l){function r(i){return i instanceof a?i:new a(function(o){o(i)})}return new(a||(a=Promise))(function(i,o){function n(g){try{u(l.next(g))}catch(s){o(s)}}function t(g){try{u(l.throw(g))}catch(s){o(s)}}function u(g){g.done?i(g.value):r(g.value).then(n,t)}u((l=l.apply(E,h||[])).next())})};Object.defineProperty(oe,"__esModule",{value:!0}),oe._fetchTxtRecords=void 0;const y=new Uint8Array([0,0,1,0,0,1,0,0,0,0,0,0,13,102,101,97,116,117,114,101,97,115,115,101,116,115,3,111,114,103,0,0,16,0,1]),c="https://cloudflare-dns.com/dns-query",f=["i","e","d"],v=200;function _(E){return e(this,void 0,void 0,function*(){const h=yield E(c,{method:"POST",headers:{"Content-Type":"application/dns-message",Accept:"application/dns-message"},body:y});if(!h.ok){const r=new Error("Failed to fetch TXT records from DNS");throw r.name="DnsTxtFetchError",r}const a=yield h.arrayBuffer(),l=new Uint8Array(a);return b(l)})}oe._fetchTxtRecords=_;function b(E){const h=E.findIndex((l,r)=>r<v&&String.fromCharCode(l)==="="&&f.includes(String.fromCharCode(E[r-1])));if(h===-1){const l=new Error("Failed to parse TXT records from DNS");throw l.name="DnsTxtParseError",l}let a="";for(let l=h-1;l<E.length;l++)a+=String.fromCharCode(E[l]);return a.split(",")}return oe}var jt;function gn(){if(jt)return z;jt=1;var e=z&&z.__awaiter||function(o,n,t,u){function g(s){return s instanceof t?s:new t(function(p){p(s)})}return new(t||(t=Promise))(function(s,p){function w(D){try{m(u.next(D))}catch(k){p(k)}}function d(D){try{m(u.throw(D))}catch(k){p(k)}}function m(D){D.done?s(D.value):g(D.value).then(w,d)}m((u=u.apply(o,n||[])).next())})};Object.defineProperty(z,"__esModule",{value:!0}),z._isDomainFailure=z.NetworkFallbackResolver=void 0;const y=_n(),c=ge(),f=N(),v=Q(),_=7*24*60*60*1e3,b=4*60*60*1e3;let E=class{constructor(n){var t;this._fallbackInfo=null,this._errorBoundary=null,this._dnsQueryCooldowns={},this._networkOverrideFunc=(t=n.networkConfig)===null||t===void 0?void 0:t.networkOverrideFunc}setErrorBoundary(n){this._errorBoundary=n}tryBumpExpiryTime(n,t){var u;const g=(u=this._fallbackInfo)===null||u===void 0?void 0:u[t.endpoint];g&&(g.expiryTime=Date.now()+_,l(n,Object.assign(Object.assign({},this._fallbackInfo),{[t.endpoint]:g})))}getActiveFallbackUrl(n,t){var u,g;if(t.customUrl!=null&&t.fallbackUrls!=null)return null;let s=this._fallbackInfo;s==null&&(s=(u=r(n))!==null&&u!==void 0?u:{},this._fallbackInfo=s);const p=s[t.endpoint];return!p||Date.now()>((g=p.expiryTime)!==null&&g!==void 0?g:0)||t.getChecksum()!==p.urlConfigChecksum?(delete s[t.endpoint],this._fallbackInfo=s,l(n,this._fallbackInfo),null):p.url?p.url:null}tryFetchUpdatedFallbackInfo(n,t,u,g){var s,p;return e(this,void 0,void 0,function*(){try{if(!h(u,g))return!1;const d=t.customUrl==null&&t.fallbackUrls==null?yield this._tryFetchFallbackUrlsFromNetwork(t):t.fallbackUrls,m=this._pickNewFallbackUrl((s=this._fallbackInfo)===null||s===void 0?void 0:s[t.endpoint],d);return m?(this._updateFallbackInfoWithNewUrl(n,t,m),!0):!1}catch(w){return(p=this._errorBoundary)===null||p===void 0||p.logError("tryFetchUpdatedFallbackInfo",w),!1}})}_updateFallbackInfoWithNewUrl(n,t,u){var g,s,p;const w={urlConfigChecksum:t.getChecksum(),url:u,expiryTime:Date.now()+_,previous:[]},d=t.endpoint,m=(g=this._fallbackInfo)===null||g===void 0?void 0:g[d];m&&w.previous.push(...m.previous),w.previous.length>10&&(w.previous=[]);const D=(p=(s=this._fallbackInfo)===null||s===void 0?void 0:s[d])===null||p===void 0?void 0:p.url;D!=null&&w.previous.push(D),this._fallbackInfo=Object.assign(Object.assign({},this._fallbackInfo),{[d]:w}),l(n,this._fallbackInfo)}_tryFetchFallbackUrlsFromNetwork(n){var t;return e(this,void 0,void 0,function*(){const u=this._dnsQueryCooldowns[n.endpoint];if(u&&Date.now()<u)return null;this._dnsQueryCooldowns[n.endpoint]=Date.now()+b;const g=[],s=yield(0,y._fetchTxtRecords)((t=this._networkOverrideFunc)!==null&&t!==void 0?t:fetch),p=i(n.defaultUrl);for(const w of s){if(!w.startsWith(n.endpointDnsKey+"="))continue;const d=w.split("=");if(d.length>1){let m=d[1];m.endsWith("/")&&(m=m.slice(0,-1)),g.push(`https://${m}${p}`)}}return g})}_pickNewFallbackUrl(n,t){var u;if(t==null)return null;const g=new Set((u=n==null?void 0:n.previous)!==null&&u!==void 0?u:[]),s=n==null?void 0:n.url;let p=null;for(const w of t){const d=w.endsWith("/")?w.slice(0,-1):w;if(!g.has(w)&&d!==s){p=d;break}}return p}};z.NetworkFallbackResolver=E;function h(o,n){var t;const u=(t=o==null?void 0:o.toLowerCase())!==null&&t!==void 0?t:"";return n||u.includes("uncaught exception")||u.includes("failed to fetch")||u.includes("networkerror when attempting to fetch resource")}z._isDomainFailure=h;function a(o){return`statsig.network_fallback.${(0,c._DJB2)(o)}`}function l(o,n){const t=a(o);if(!n||Object.keys(n).length===0){v.Storage.removeItem(t);return}v.Storage.setItem(t,JSON.stringify(n))}function r(o){const n=a(o),t=v.Storage.getItem(n);if(!t)return null;try{return JSON.parse(t)}catch{return f.Log.error("Failed to parse FallbackInfo"),null}}function i(o){try{return new URL(o).pathname}catch{return null}}return z}var Ee={},Nt;function nn(){if(Nt)return Ee;Nt=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.SDKFlags=void 0;const e={};return Ee.SDKFlags={setFlags:(y,c)=>{e[y]=c},get:(y,c)=>{var f,v;return(v=(f=e[y])===null||f===void 0?void 0:f[c])!==null&&v!==void 0?v:!1}},Ee}var ze={},At;function nt(){return At||(At=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StatsigSession=e.SessionID=void 0;const y=H(),c=Ie(),f=N(),v=Q(),_=et(),b=30*60*1e3,E=4*60*60*1e3,h={};e.SessionID={get:s=>e.StatsigSession.get(s).data.sessionID},e.StatsigSession={get:s=>{h[s]==null&&(h[s]=a(s));const p=h[s];return r(p)},overrideInitialSessionID:(s,p)=>{h[p]=l(s,p)}};function a(s){let p=g(s);const w=Date.now();return p||(p={sessionID:(0,_.getUUID)(),startTime:w,lastUpdate:w}),{data:p,sdkKey:s}}function l(s,p){const w=Date.now();return{data:{sessionID:s,startTime:w,lastUpdate:w},sdkKey:p}}function r(s){const p=Date.now(),w=s.data,d=s.sdkKey;if(o(w)||n(w)){w.sessionID=(0,_.getUUID)(),w.startTime=p;const D=__STATSIG__==null?void 0:__STATSIG__.instance(d);D&&D.$emt({name:"session_expired"})}w.lastUpdate=p,u(w,s.sdkKey),clearTimeout(s.idleTimeoutID),clearTimeout(s.ageTimeoutID);const m=p-w.startTime;return s.idleTimeoutID=i(d,b),s.ageTimeoutID=i(d,E-m),s}function i(s,p){return setTimeout(()=>{var w;const d=(w=(0,y._getStatsigGlobal)())===null||w===void 0?void 0:w.instance(s);d&&d.$emt({name:"session_expired"})},p)}function o({lastUpdate:s}){return Date.now()-s>b}function n({startTime:s}){return Date.now()-s>E}function t(s){return`statsig.session_id.${(0,c._getStorageKey)(s)}`}function u(s,p){const w=t(p);try{(0,v._setObjectInStorage)(w,s)}catch{f.Log.warn("Failed to save SessionID")}}function g(s){const p=t(s);return(0,v._getObjectFromStorage)(p)}}(ze)),ze}var we={},Ft;function rn(){return Ft||(Ft=1,Object.defineProperty(we,"__esModule",{value:!0}),we.ErrorTag=void 0,we.ErrorTag={NetworkError:"NetworkError"}),we}var qt;function fn(){if(qt)return ie;qt=1;var e=ie&&ie.__awaiter||function(I,S,O,T){function R(M){return M instanceof O?M:new O(function(P){P(M)})}return new(O||(O=Promise))(function(M,P){function fe(A){try{$(T.next(A))}catch(F){P(F)}}function V(A){try{$(T.throw(A))}catch(F){P(F)}}function $(A){A.done?M(A.value):R(A.value).then(fe,V)}$((T=T.apply(I,S||[])).next())})};Object.defineProperty(ie,"__esModule",{value:!0}),ie.NetworkCore=void 0,H();const y=H(),c=Xe(),f=N(),v=Ce(),_=gn(),b=nn(),E=tt(),h=le(),a=nt(),l=Re(),r=rn(),i=Oe(),o=Te(),n=Ze(),t=1e4,u=500,g=3e4,s=1e3,p=50,w=p/s,d=new Set([408,500,502,503,504,522,524,599]);let m=class{constructor(S,O){this._emitter=O,this._errorBoundary=null,this._timeout=t,this._netConfig={},this._options={},this._leakyBucket={},this._lastUsedInitUrl=null,S&&(this._options=S),this._options.networkConfig&&(this._netConfig=this._options.networkConfig),this._netConfig.networkTimeoutMs&&(this._timeout=this._netConfig.networkTimeoutMs),this._fallbackResolver=new _.NetworkFallbackResolver(this._options),this.setLogEventCompressionMode(this._getLogEventCompressionMode(S))}setLogEventCompressionMode(S){this._options.logEventCompressionMode=S}setErrorBoundary(S){this._errorBoundary=S,this._errorBoundary.wrap(this),this._errorBoundary.wrap(this._fallbackResolver),this._fallbackResolver.setErrorBoundary(S)}isBeaconSupported(){return typeof navigator<"u"&&typeof navigator.sendBeacon=="function"}getLastUsedInitUrlAndReset(){const S=this._lastUsedInitUrl;return this._lastUsedInitUrl=null,S}beacon(S){return e(this,void 0,void 0,function*(){if(!D(S))return!1;const O=this._getInternalRequestArgs("POST",S);yield this._tryToCompressBody(O);const T=yield this._getPopulatedURL(O),R=navigator;return R.sendBeacon.bind(R)(T,O.body)})}post(S){return e(this,void 0,void 0,function*(){const O=this._getInternalRequestArgs("POST",S);return this._tryEncodeBody(O),yield this._tryToCompressBody(O),this._sendRequest(O)})}get(S){const O=this._getInternalRequestArgs("GET",S);return this._sendRequest(O)}_sendRequest(S){var O,T,R,M;return e(this,void 0,void 0,function*(){if(!D(S)||this._netConfig.preventAllNetworkTraffic)return null;const{method:P,body:fe,retries:V,attempt:$}=S,A=S.urlConfig.endpoint;if(this._isRateLimited(A))return f.Log.warn(`Request to ${A} was blocked because you are making requests too frequently.`),null;const F=$??1,K=typeof AbortController<"u"?new AbortController:null,ue=setTimeout(()=>{K==null||K.abort(`Timeout of ${this._timeout}ms expired.`)},this._timeout),ve=yield this._getPopulatedURL(S);let G=null;const on=(0,n._isUnloading)();try{const ce={method:P,body:fe,headers:Object.assign({},S.headers),signal:K==null?void 0:K.signal,priority:S.priority,keepalive:on};W(S,F);const de=this._leakyBucket[A];if(de&&(de.lastRequestTime=Date.now(),this._leakyBucket[A]=de),G=yield((O=this._netConfig.networkOverrideFunc)!==null&&O!==void 0?O:fetch)(ve,ce),clearTimeout(ue),!G.ok){const ke=yield G.text().catch(()=>"No Text"),it=new Error(`NetworkError: ${ve} ${ke}`);throw it.name="NetworkError",it}const Me=yield G.text();return x(S,G,F,Me),this._fallbackResolver.tryBumpExpiryTime(S.sdkKey,S.urlConfig),{body:Me,code:G.status}}catch(ce){const de=L(K,ce),rt=U(K);if(x(S,G,F,"",ce),(yield this._fallbackResolver.tryFetchUpdatedFallbackInfo(S.sdkKey,S.urlConfig,de,rt))&&(S.fallbackUrl=this._fallbackResolver.getActiveFallbackUrl(S.sdkKey,S.urlConfig)),!V||F>V||!d.has((T=G==null?void 0:G.status)!==null&&T!==void 0?T:500)){(R=this._emitter)===null||R===void 0||R.call(this,{name:"error",error:ce,tag:r.ErrorTag.NetworkError,requestArgs:S});const ke=`A networking error occurred during ${P} request to ${ve}.`;return f.Log.error(ke,de,ce),(M=this._errorBoundary)===null||M===void 0||M.attachErrorIfNoneExists(ke),null}return yield B(F),this._sendRequest(Object.assign(Object.assign({},S),{retries:V,attempt:F+1}))}})}_getLogEventCompressionMode(S){let O=S==null?void 0:S.logEventCompressionMode;return!O&&(S==null?void 0:S.disableCompression)===!0&&(O=o.LogEventCompressionMode.Disabled),O||(O=o.LogEventCompressionMode.Enabled),O}_isRateLimited(S){var O;const T=Date.now(),R=(O=this._leakyBucket[S])!==null&&O!==void 0?O:{count:0,lastRequestTime:T},M=T-R.lastRequestTime,P=Math.floor(M*w);return R.count=Math.max(0,R.count-P),R.count>=p?!0:(R.count+=1,R.lastRequestTime=T,this._leakyBucket[S]=R,!1)}_getPopulatedURL(S){var O;return e(this,void 0,void 0,function*(){const T=(O=S.fallbackUrl)!==null&&O!==void 0?O:S.urlConfig.getUrl();(S.urlConfig.endpoint===v.Endpoint._initialize||S.urlConfig.endpoint===v.Endpoint._download_config_specs)&&(this._lastUsedInitUrl=T);const R=Object.assign({[v.NetworkParam.SdkKey]:S.sdkKey,[v.NetworkParam.SdkType]:E.SDKType._get(S.sdkKey),[v.NetworkParam.SdkVersion]:i.SDK_VERSION,[v.NetworkParam.Time]:String(Date.now()),[v.NetworkParam.SessionID]:a.SessionID.get(S.sdkKey)},S.params),M=Object.keys(R).map(P=>`${encodeURIComponent(P)}=${encodeURIComponent(R[P])}`).join("&");return`${T}${M?`?${M}`:""}`})}_tryEncodeBody(S){var O;const T=(0,h._getWindowSafe)(),R=S.body;if(!(!S.isStatsigEncodable||this._options.disableStatsigEncoding||typeof R!="string"||(0,y._getStatsigGlobalFlag)("no-encode")!=null||!(T!=null&&T.btoa)))try{S.body=T.btoa(R).split("").reverse().join(""),S.params=Object.assign(Object.assign({},(O=S.params)!==null&&O!==void 0?O:{}),{[v.NetworkParam.StatsigEncoded]:"1"})}catch(M){f.Log.warn(`Request encoding failed for ${S.urlConfig.getUrl()}`,M)}}_tryToCompressBody(S){var O;return e(this,void 0,void 0,function*(){const T=S.body;if(!(typeof T!="string"||!C(S,this._options)))try{const R=new TextEncoder().encode(T),M=new CompressionStream("gzip"),P=M.writable.getWriter();P.write(R).catch(f.Log.error),P.close().catch(f.Log.error);const fe=M.readable.getReader(),V=[];let $;for(;!($=yield fe.read()).done;)V.push($.value);const A=V.reduce((ue,ve)=>ue+ve.length,0),F=new Uint8Array(A);let K=0;for(const ue of V)F.set(ue,K),K+=ue.length;S.body=F,S.params=Object.assign(Object.assign({},(O=S.params)!==null&&O!==void 0?O:{}),{[v.NetworkParam.IsGzipped]:"1"})}catch(R){f.Log.warn(`Request compression failed for ${S.urlConfig.getUrl()}`,R)}})}_getInternalRequestArgs(S,O){const T=this._fallbackResolver.getActiveFallbackUrl(O.sdkKey,O.urlConfig),R=Object.assign(Object.assign({},O),{method:S,fallbackUrl:T});return"data"in O&&k(R,O.data),R}};ie.NetworkCore=m;const D=I=>I.sdkKey?!0:(f.Log.warn("Unable to make request without an SDK key"),!1),k=(I,S)=>{const{sdkKey:O,fallbackUrl:T}=I,R=l.StableID.get(O),M=a.SessionID.get(O),P=E.SDKType._get(O);I.body=JSON.stringify(Object.assign(Object.assign({},S),{statsigMetadata:Object.assign(Object.assign({},i.StatsigMetadataProvider.get()),{stableID:R,sessionID:M,sdkType:P,fallbackUrl:T})}))};function C(I,S){if(!I.isCompressable||(0,y._getStatsigGlobalFlag)("no-compress")!=null||typeof CompressionStream>"u"||typeof TextEncoder>"u")return!1;const O=I.urlConfig.customUrl!=null||I.urlConfig.fallbackUrls!=null,T=b.SDKFlags.get(I.sdkKey,"enable_log_event_compression")===!0;switch(S.logEventCompressionMode){case o.LogEventCompressionMode.Disabled:return!1;case o.LogEventCompressionMode.Enabled:return!(O&&!T);case o.LogEventCompressionMode.Forced:return!0;default:return!1}}function L(I,S){return I!=null&&I.signal.aborted&&typeof I.signal.reason=="string"?I.signal.reason:typeof S=="string"?S:S instanceof Error?`${S.name}: ${S.message}`:"Unknown Error"}function U(I){return(I==null?void 0:I.signal.aborted)&&typeof I.signal.reason=="string"&&I.signal.reason.includes("Timeout")||!1}function W(I,S){I.urlConfig.endpoint===v.Endpoint._initialize&&c.Diagnostics._markInitNetworkReqStart(I.sdkKey,{attempt:S})}function x(I,S,O,T,R){I.urlConfig.endpoint===v.Endpoint._initialize&&c.Diagnostics._markInitNetworkReqEnd(I.sdkKey,c.Diagnostics._getDiagnosticsData(S,O,T,R))}function B(I){return e(this,void 0,void 0,function*(){yield new Promise(S=>setTimeout(S,Math.min(u*(I*I),g)))})}return ie}var We={},Kt;function vn(){return Kt||(Kt=1,Object.defineProperty(We,"__esModule",{value:!0})),We}var xe={},Bt;function hn(){return Bt||(Bt=1,Object.defineProperty(xe,"__esModule",{value:!0})),xe}var se={},$t;function yn(){if($t)return se;$t=1;var e=se&&se.__awaiter||function(n,t,u,g){function s(p){return p instanceof u?p:new u(function(w){w(p)})}return new(u||(u=Promise))(function(p,w){function d(k){try{D(g.next(k))}catch(C){w(C)}}function m(k){try{D(g.throw(k))}catch(C){w(C)}}function D(k){k.done?p(k.value):s(k.value).then(d,m)}D((g=g.apply(n,t||[])).next())})};Object.defineProperty(se,"__esModule",{value:!0}),se.StatsigClientBase=void 0,H();const y=H(),c=en(),f=Xt(),v=N(),_=tn(),b=le(),E=nt(),h=Re(),a=Te(),l=Q(),r=3e3;let i=class{constructor(t,u,g,s){var p,w,d,m;this.loadingStatus="Uninitialized",this._initializePromise=null,this._listeners={};const D=this.$emt.bind(this);(s==null?void 0:s.logLevel)!=null&&(v.Log.level=s.logLevel),s!=null&&s.disableStorage&&l.Storage._setDisabled(!0),s!=null&&s.initialSessionID&&E.StatsigSession.overrideInitialSessionID(s.initialSessionID,t),s!=null&&s.storageProvider&&l.Storage._setProvider(s.storageProvider),s!=null&&s.enableCookies&&h.StableID._setCookiesEnabled(t,s.enableCookies),s!=null&&s.disableStableID&&h.StableID._setDisabled(t,!0),this._sdkKey=t,this._options=s??{},this._memoCache={},this.overrideAdapter=(p=s==null?void 0:s.overrideAdapter)!==null&&p!==void 0?p:null,this._logger=new f.EventLogger(t,D,g,s),this._errorBoundary=new c.ErrorBoundary(t,s,D),this._errorBoundary.wrap(this),this._errorBoundary.wrap(u),this._errorBoundary.wrap(this._logger),g.setErrorBoundary(this._errorBoundary),this.dataAdapter=u,this.dataAdapter.attach(t,s,g),this.storageProvider=l.Storage,(m=(d=(w=this.overrideAdapter)===null||w===void 0?void 0:w.loadFromStorage)===null||d===void 0?void 0:d.call(w))===null||m===void 0||m.catch(k=>this._errorBoundary.logError("OA::loadFromStorage",k)),this._primeReadyRipcord(),o(t,this)}updateRuntimeOptions(t){t.loggingEnabled?(this._options.loggingEnabled=t.loggingEnabled,this._logger.setLoggingEnabled(t.loggingEnabled)):t.disableLogging!=null&&(this._options.disableLogging=t.disableLogging,this._logger.setLoggingEnabled(t.disableLogging?"disabled":"browser-only")),t.disableStorage!=null&&(this._options.disableStorage=t.disableStorage,l.Storage._setDisabled(t.disableStorage)),t.enableCookies!=null&&(this._options.enableCookies=t.enableCookies,h.StableID._setCookiesEnabled(this._sdkKey,t.enableCookies)),t.logEventCompressionMode?this._logger.setLogEventCompressionMode(t.logEventCompressionMode):t.disableCompression&&this._logger.setLogEventCompressionMode(a.LogEventCompressionMode.Disabled)}flush(){return this._logger.flush()}shutdown(){return e(this,void 0,void 0,function*(){this.$emt({name:"pre_shutdown"}),this._setStatus("Uninitialized",null),this._initializePromise=null,yield this._logger.stop()})}on(t,u){this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(u)}off(t,u){if(this._listeners[t]){const g=this._listeners[t].indexOf(u);g!==-1&&this._listeners[t].splice(g,1)}}$on(t,u){u.__isInternal=!0,this.on(t,u)}$emt(t){var u;const g=s=>{try{s(t)}catch(p){if(s.__isInternal===!0){this._errorBoundary.logError(`__emit:${t.name}`,p);return}v.Log.error("An error occurred in a StatsigClientEvent listener. This is not an issue with Statsig.",t)}};this._listeners[t.name]&&this._listeners[t.name].forEach(s=>g(s)),(u=this._listeners["*"])===null||u===void 0||u.forEach(g)}_setStatus(t,u){this.loadingStatus=t,this._memoCache={},this.$emt({name:"values_updated",status:t,values:u})}_enqueueExposure(t,u,g){if((g==null?void 0:g.disableExposureLog)===!0){this._logger.incrementNonExposureCount(t);return}this._logger.enqueue(u)}_memoize(t,u){return(g,s)=>{if(this._options.disableEvaluationMemoization)return u(g,s);const p=(0,_.createMemoKey)(t,g,s);return p?(p in this._memoCache||(Object.keys(this._memoCache).length>=r&&(this._memoCache={}),this._memoCache[p]=u(g,s)),this._memoCache[p]):u(g,s)}}};se.StatsigClientBase=i;function o(n,t){var u;if((0,b._isServerEnv)())return;const g=(0,y._getStatsigGlobal)(),s=(u=g.instances)!==null&&u!==void 0?u:{},p=t;s[n]!=null&&v.Log.warn("Creating multiple Statsig clients with the same SDK key can lead to unexpected behavior. Multi-instance support requires different SDK keys."),s[n]=p,g.firstInstance||(g.firstInstance=p),g.instances=s,__STATSIG__=g}return se}var De={},Gt;function mn(){return Gt||(Gt=1,Object.defineProperty(De,"__esModule",{value:!0}),De.DataAdapterCachePrefix=void 0,De.DataAdapterCachePrefix="statsig.cached"),De}var He={},Vt;function Sn(){return Vt||(Vt=1,Object.defineProperty(He,"__esModule",{value:!0})),He}var j={},Jt;function bn(){if(Jt)return j;Jt=1,Object.defineProperty(j,"__esModule",{value:!0}),j._makeTypedGet=j._mergeOverride=j._makeLayer=j._makeExperiment=j._makeDynamicConfig=j._makeFeatureGate=void 0;const e=N(),y=Ye();function c(a,l,r,i){var o;return{name:a,details:l,ruleID:(o=r==null?void 0:r.rule_id)!==null&&o!==void 0?o:"",__evaluation:r,value:i}}function f(a,l,r){var i;return Object.assign(Object.assign({},c(a,l,r,(r==null?void 0:r.value)===!0)),{idType:(i=r==null?void 0:r.id_type)!==null&&i!==void 0?i:null})}j._makeFeatureGate=f;function v(a,l,r){var i;const o=(i=r==null?void 0:r.value)!==null&&i!==void 0?i:{};return Object.assign(Object.assign({},c(a,l,r,o)),{get:h(a,r==null?void 0:r.value)})}j._makeDynamicConfig=v;function _(a,l,r){var i;const o=v(a,l,r);return Object.assign(Object.assign({},o),{groupName:(i=r==null?void 0:r.group_name)!==null&&i!==void 0?i:null})}j._makeExperiment=_;function b(a,l,r,i){var o,n;return Object.assign(Object.assign({},c(a,l,r,void 0)),{get:h(a,r==null?void 0:r.value,i),groupName:(o=r==null?void 0:r.group_name)!==null&&o!==void 0?o:null,__value:(n=r==null?void 0:r.value)!==null&&n!==void 0?n:{}})}j._makeLayer=b;function E(a,l,r,i){return Object.assign(Object.assign(Object.assign({},a),l),{get:h(a.name,r,i)})}j._mergeOverride=E;function h(a,l,r){return(i,o)=>{var n;const t=(n=l==null?void 0:l[i])!==null&&n!==void 0?n:null;return t==null?o??null:o!=null&&!(0,y._isTypeMatch)(t,o)?(e.Log.warn(`Parameter type mismatch. '${a}.${i}' was found to be type '${typeof t}' but fallback/return type is '${typeof o}'. See https://docs.statsig.com/client/javascript-sdk/#typed-getters`),o??null):(r==null||r(i),t)}}return j._makeTypedGet=h,j}var Qe={},zt;function pn(){return zt||(zt=1,Object.defineProperty(Qe,"__esModule",{value:!0})),Qe}var ae={},Wt;function En(){if(Wt)return ae;Wt=1,Object.defineProperty(ae,"__esModule",{value:!0}),ae.UPDATE_DETAIL_ERROR_MESSAGES=ae.createUpdateDetails=void 0;const e=(y,c,f,v,_,b)=>({duration:f,source:c,success:y,error:v,sourceUrl:_,warnings:b});return ae.createUpdateDetails=e,ae.UPDATE_DETAIL_ERROR_MESSAGES={NO_NETWORK_DATA:"No data was returned from the network. This may be due to a network timeout if a timeout value was specified in the options or ad blocker error."},ae}var xt;function wn(){return xt||(xt=1,function(e){var y=X&&X.__createBinding||(Object.create?function(a,l,r,i){i===void 0&&(i=r);var o=Object.getOwnPropertyDescriptor(l,r);(!o||("get"in o?!l.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return l[r]}}),Object.defineProperty(a,i,o)}:function(a,l,r,i){i===void 0&&(i=r),a[i]=l[r]}),c=X&&X.__exportStar||function(a,l){for(var r in a)r!=="default"&&!Object.prototype.hasOwnProperty.call(l,r)&&y(l,a,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.Storage=e.Log=e.EventLogger=e.Diagnostics=void 0,H();const f=H(),v=Xe();Object.defineProperty(e,"Diagnostics",{enumerable:!0,get:function(){return v.Diagnostics}});const _=Xt();Object.defineProperty(e,"EventLogger",{enumerable:!0,get:function(){return _.EventLogger}});const b=N();Object.defineProperty(e,"Log",{enumerable:!0,get:function(){return b.Log}});const E=Oe(),h=Q();Object.defineProperty(e,"Storage",{enumerable:!0,get:function(){return h.Storage}}),c(H(),e),c(Ie(),e),c(sn(),e),c(an(),e),c(Xe(),e),c(ln(),e),c(en(),e),c(un(),e),c(cn(),e),c(ge(),e),c(dn(),e),c(N(),e),c(tn(),e),c(Ce(),e),c(fn(),e),c(vn(),e),c(hn(),e),c(le(),e),c(tt(),e),c(nt(),e),c(Re(),e),c(yn(),e),c(rn(),e),c(mn(),e),c(Ht(),e),c(Oe(),e),c(Te(),e),c(Sn(),e),c(bn(),e),c(pn(),e),c(Yt(),e),c(Q(),e),c(Zt(),e),c(Ye(),e),c(Qt(),e),c(et(),e),c(Ze(),e),c(En(),e),c(nn(),e),Object.assign((0,f._getStatsigGlobal)(),{Log:b.Log,SDK_VERSION:E.SDK_VERSION})}(X)),X}var Un=wn();export{Dn as a,ot as c,kn as g,wn as r,Un as s};

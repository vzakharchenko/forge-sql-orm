#!/bin/sh
set -e
exit 1;
echo 'ðŸ” Running forge-sql-orm checks...'

echo 'âž¡ï¸ lint-staged (forge-sql-orm)'
npx lint-staged || { echo 'âŒ lint-staged failed for resolver'; exit 1; }

echo 'âž¡ï¸ typecheck (forge-sql-orm)'
npm run build || { echo 'âŒ build failed'; exit 1; }

echo 'âž¡ï¸ dependencies check'
npm run knip || { echo 'âŒ Dependency check failed.'; exit 1; }

echo 'âž¡ï¸ lint check'
npm run lint || { echo 'âŒ lint check failed.'; exit 1; }

echo 'ðŸ” Running forge-sql-orm-cli resources checks...'
pushd forge-sql-orm-cli > /dev/null

echo 'âž¡ï¸ lint-staged (forge-sql-orm-cli resources)'
npx lint-staged || { echo 'âŒ lint-staged failed for forge-sql-orm-cli resources'; popd > /dev/null; exit 1; }


echo 'âž¡ï¸ dependencies check'
npm run knip || { echo 'âŒ Dependency check for forge-sql-orm-cli resources failed.'; exit 1; }

echo 'âž¡ï¸ build'
npm run build || { echo 'âŒ Build failed'; popd > /dev/null; exit 1; }

popd > /dev/null